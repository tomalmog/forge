.pipeline-graph-shell {
    margin-top: 10px;
    border: 1px solid var(--line);
    border-radius: 4px;
    background: #252c38;
    overflow: hidden;
}

.pipeline-control-row {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 8px;
    border-bottom: 1px solid var(--line);
    background: #28303c;
}

.pipeline-controls-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1 1 auto;
    min-width: 0;
}

.pipeline-control-divider {
    color: var(--muted);
    font-size: 0.95rem;
    line-height: 1;
    user-select: none;
}

.pipeline-control-actions {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
}

.pipeline-control-row .palette,
.pipeline-control-row .pipeline-toolbar {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.pipeline-control-row .pipeline-control-button {
    min-height: 44px;
    padding: 0 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.pipeline-toolbar-note {
    color: var(--muted);
    padding-left: 6px;
    font-size: 0.7rem;
}

.pipeline-toolbar {
    min-height: 38px;
}

.pipeline-control-button {
    border: 1px solid var(--line);
    border-radius: 4px;
    background: var(--bg-strong);
    color: var(--ink);
    font: inherit;
    padding: 6px 10px;
    cursor: pointer;
}

.pipeline-control-button:hover {
    background: #363e4e;
}

.pipeline-control-button.is-active {
    border-color: var(--accent);
    background: #33415c;
}

.pipeline-control-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.pipeline-graph {
    position: relative;
    min-height: 460px;
    border: 0;
    border-radius: 0;
    background-color: #252c38;
    background-image:
        linear-gradient(
            to right,
            rgba(143, 151, 166, 0.11) 1px,
            transparent 1px
        ),
        linear-gradient(
            to bottom,
            rgba(143, 151, 166, 0.11) 1px,
            transparent 1px
        );
    background-size: 20px 20px;
    overflow: hidden;
}

.pipeline-graph.tool-move {
    cursor: move;
}

.pipeline-graph.tool-wire {
    cursor:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3E%3Ccircle cx='6' cy='6' r='3' fill='%237aa0f0'/%3E%3Ccircle cx='16' cy='16' r='3' fill='%237aa0f0'/%3E%3Cpath d='M8.5 8.5 L13.5 13.5' stroke='%237aa0f0' stroke-width='2'/%3E%3C/svg%3E")
            4 4,
        crosshair;
}

.pipeline-graph.tool-erase {
    cursor:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3E%3Cpath d='M3 14l6-6 8 8-3 3H7z' fill='%23e3c093' stroke='%233a4150' stroke-width='1.2'/%3E%3Cpath d='M13 8l2-2 4 4-2 2z' fill='%23b8c2d4' stroke='%233a4150' stroke-width='1.1'/%3E%3C/svg%3E")
            3 17,
        crosshair;
}

.pipeline-edge-layer {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.pipeline-edge-layer line,
.pipeline-edge-line {
    stroke: #63718a;
    stroke-width: 1.5px;
    stroke-linecap: round;
}

.pipeline-graph-node {
    position: absolute;
    width: 190px;
    height: 88px;
    display: grid;
    align-content: center;
    justify-items: start;
    gap: 3px;
    text-align: left;
    border: 1px solid #465061;
    background: #2e3645;
    color: var(--ink);
    border-radius: 4px;
    padding: 10px;
    cursor: grab;
}

.pipeline-graph.tool-move .pipeline-graph-node {
    cursor: grab;
}

.pipeline-graph.tool-wire .pipeline-graph-node {
    cursor:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3E%3Ccircle cx='6' cy='6' r='3' fill='%237aa0f0'/%3E%3Ccircle cx='16' cy='16' r='3' fill='%237aa0f0'/%3E%3Cpath d='M8.5 8.5 L13.5 13.5' stroke='%237aa0f0' stroke-width='2'/%3E%3C/svg%3E")
            4 4,
        crosshair;
}

.pipeline-graph.tool-erase .pipeline-graph-node {
    cursor:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3E%3Cpath d='M3 14l6-6 8 8-3 3H7z' fill='%23e3c093' stroke='%233a4150' stroke-width='1.2'/%3E%3Cpath d='M13 8l2-2 4 4-2 2z' fill='%23b8c2d4' stroke='%233a4150' stroke-width='1.1'/%3E%3C/svg%3E")
            3 17,
        crosshair;
}

.pipeline-graph-node strong {
    font-size: 0.92rem;
}

.pipeline-graph-node small {
    color: var(--muted);
    font-size: 0.74rem;
}

.pipeline-graph-node.selected {
    border-color: var(--accent);
    background: #33415c;
}

.pipeline-graph-node.start {
    box-shadow: inset 0 0 0 1px #d19f6c;
}

.pipeline-graph-node.wire-source {
    box-shadow: inset 0 0 0 2px #7db0ff;
}

.pipeline-graph-node.editor-open {
    outline: 1px solid #8a92a4;
    outline-offset: 1px;
}

.node-badge {
    margin-top: 2px;
    color: #d19f6c;
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.pipeline-empty {
    margin: 0;
    color: var(--muted);
    padding: 12px;
}

.pipeline-control-message {
    margin: 0;
    padding: 6px 10px;
    border-bottom: 1px solid var(--line);
    color: var(--muted);
    font-size: 0.72rem;
    word-break: break-all;
}

.pipeline-editor-list {
    margin-top: 12px;
    display: grid;
    gap: 10px;
}

.pipeline-editor-header-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.pipeline-inspector-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.pipeline-edge-list {
    display: grid;
    gap: 4px;
}

.pipeline-edge-list strong {
    font-size: 0.78rem;
    color: var(--muted-strong);
}

@media (max-width: 1080px) {
    .pipeline-control-row {
        flex-direction: column;
        align-items: stretch;
    }

    .pipeline-controls-left,
    .pipeline-control-actions {
        width: 100%;
        margin-left: 0;
    }

    .pipeline-graph {
        min-height: 340px;
    }

    .pipeline-inspector-actions {
        flex-wrap: wrap;
    }
}
